# ================================================================================
# TERRAFORM COST INTELLIGENCE PLATFORM - ENVIRONMENT CONFIGURATION
# ================================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env with real credentials to version control
# ================================================================================

# ================================================================================
# GLOBAL SETTINGS
# ================================================================================
ENVIRONMENT=production
LOG_LEVEL=INFO
LOG_FORMAT=json

# ================================================================================
# DATABASE (PostgreSQL)
# ================================================================================
POSTGRES_DB=cost_governance
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# ================================================================================
# FRONTEND
# ================================================================================
NODE_ENV=production
# Use relative path for reverse proxy compatibility
# For direct access, use: http://your-domain:8080
NEXT_PUBLIC_API_URL=/api

# ================================================================================
# API GATEWAY
# ================================================================================
# Authentication (optional - set auth_enabled=true in config to use)
JWT_ISSUER=https://your-auth-provider.com
JWT_AUDIENCE=cost-platform-api
RATE_LIMIT_RPS=100

# Service URLs (automatically set by docker-compose, override if needed)
# JOB_ORCHESTRATOR_URL=http://job-orchestrator:8001
# RESULTS_SERVICE_URL=http://results-service:8008

# ================================================================================
# JOB ORCHESTRATOR
# ================================================================================
JOB_TIMEOUT_SECONDS=300
MAX_RETRIES=3

# Downstream service URLs (automatically set by docker-compose)
# TERRAFORM_EXECUTOR_URL=http://terraform-executor:8002
# PLAN_INTERPRETER_URL=http://plan-interpreter:8003
# METADATA_RESOLVER_URL=http://aws-metadata-resolver:8004
# PRICING_ENGINE_URL=http://pricing-engine:8005
# USAGE_ENGINE_URL=http://usage-engine:8006
# COST_ENGINE_URL=http://cost-engine:8007
# RESULTS_SERVICE_URL=http://results-service:8008

# Database connection (automatically set by docker-compose)
# DATABASE_URL=postgresql://postgres:postgres@postgres:5432/cost_governance
# REDIS_URL=redis://redis:6379/2

# ================================================================================
# TERRAFORM EXECUTOR
# ================================================================================
TERRAFORM_VERSION=1.6.0
EXECUTION_TIMEOUT=180

# Redis connection (automatically set by docker-compose)
# REDIS_URL=redis://redis:6379/0

# ================================================================================
# PLAN INTERPRETER
# ================================================================================
# No additional configuration required

# ================================================================================
# AWS METADATA RESOLVER
# ================================================================================
AWS_REGION=us-east-1

# ⚠️ SECURITY: DO NOT set AWS credentials here in production!
# Use IAM instance role or IAM role for service accounts (IRSA)
# For local development only, you can set:
# AWS_ACCESS_KEY_ID=your-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_SESSION_TOKEN=your-session-token

METADATA_CACHE_TTL=3600

# Redis connection (automatically set by docker-compose)
# REDIS_URL=redis://redis:6379/0

# ================================================================================
# PRICING ENGINE
# ================================================================================
PRICING_CACHE_TTL=86400
SUPPORTED_SERVICES=ec2,ebs,elb,rds

# Redis connection (automatically set by docker-compose)
# REDIS_URL=redis://redis:6379/1

# ================================================================================
# USAGE MODELING ENGINE
# ================================================================================
DEFAULT_USAGE_PROFILE=prod

# ================================================================================
# COST AGGREGATION ENGINE
# ================================================================================
DEFAULT_CURRENCY=USD
DECIMAL_PRECISION=28

# ================================================================================
# RESULTS & GOVERNANCE SERVICE
# ================================================================================
RETENTION_DAYS=365

# Database connection (automatically set by docker-compose)
# DATABASE_URL=postgresql://postgres:postgres@postgres:5432/cost_governance

# ================================================================================
# DEPLOYMENT NOTES
# ================================================================================
# 
# Production Deployment Checklist:
# 
# 1. Database:
#    - Use strong POSTGRES_PASSWORD
#    - Consider external PostgreSQL for production
# 
# 2. AWS Access:
#    - Attach IAM role to EC2 instance with read-only AWS permissions
#    - DO NOT use static AWS credentials in production
# 
# 3. Authentication:
#    - Configure JWT_ISSUER and JWT_AUDIENCE for your auth provider
#    - Set auth_enabled=true in api-gateway config
# 
# 4. Networking:
#    - Use reverse proxy (Nginx/Traefik) to route /api/* to api-gateway:8080
#    - Or expose api-gateway:8080 directly
# 
# 5. Monitoring:
#    - All services log to stdout in JSON format
#    - Use docker compose logs or external log aggregation
# 
# 6. Scaling:
#    - Adjust resource limits in docker-compose.yml
#    - Consider Kubernetes for multi-node deployment
# 
# ================================================================================
