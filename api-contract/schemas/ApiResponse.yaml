ApiResponse:
  type: object
  required:
    - success
    - data
    - error
    - correlation_id
  properties:
    success:
      type: boolean
      description: Whether the request succeeded
      example: true
    
    data:
      description: Response payload (null on error)
      oneOf:
        - type: object
        - type: array
        - type: "null"
    
    error:
      oneOf:
        - $ref: './Error.yaml#/Error'
        - type: "null"
    
    correlation_id:
      type: string
      format: uuid
      description: Request correlation ID for tracing
      example: "750e8400-e29b-41d4-a716-446655440000"

Error:
  type: object
  required:
    - code
    - message
  properties:
    code:
      type: string
      enum:
        - VALIDATION_ERROR
        - NOT_FOUND
        - UNAUTHORIZED
        - FORBIDDEN
        - INTERNAL_ERROR
        - SERVICE_UNAVAILABLE
        - BAD_REQUEST
      description: Machine-readable error code
      example: "VALIDATION_ERROR"
    
    message:
      type: string
      description: Human-readable error message
      example: "Request validation failed"
    
    details:
      type: object
      description: Additional error context
      additionalProperties: true
      example:
        field: "upload_id"
        reason: "Upload not found"
